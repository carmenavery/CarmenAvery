---
title: "Assignments"
output:
  pdf_document:
    toc: no
    toc_depth: '1'
  html_document:
    toc: yes
    toc_float: yes
    collapsed: no
    number_sections: no
    toc_depth: 1
---


This page will contain all the assignments you submit for the class.



### Instructions for all assignments

I want you to submit your assignment as a PDF, so I can keep a record of what the code looked like that day. I also want you to include your answers on your personal GitHub website. This will be good practice for editing your website and it will help you produce something you can keep after the class is over.

1. Download the Assignment1.Rmd file from Canvas. You can use this as a template for writing your answers. It's the same as what you can see on my website in the Assignments tab. Once we're done with this I'll edit the text on the website to include the solutions.

2. On RStudio, open a new R script in RStudio (File > New File > R Script). This is where you can test out your R code. You'll write your R commands and draw plots here.

3. Once you have finalized your code, copy and paste your results into this template (Assignment 1.Rmd). For example, if you produced a plot as the solution to one of the problems, you can copy and paste the R code in R markdown by using the ` ``{r} ``` ` command. Answer the questions in full sentences and Save.

4. Produce a PDF file with your answers. To do this, knit to PDF (use Knit button at the top of RStudio), locate the PDF file in your docs folder (it's in the same folder as the Rproj), and submit that on on Canvas in Assignment 1.

5. Build Website, go to GitHub desktop, commit and push. Now your solutions should be on your website as well.






# Assignment 1

**Collaborators: Rachael Villari, Elizabeth Stoner, and Halle Wasser**

This assignment is due on Canvas on Monday 9/20 before class, at 10:15 am. Include the name of anyone with whom you collaborated at the top of the assignment.


### Problem 1 

Install the datasets package on the console below using `install.packages("datasets")`. Now load the library.

```{r}
library(knitr)
library(datasets)
```

Load the USArrests dataset and rename it `dat`. Note that this dataset comes with R, in the package datasets, so there's no need to load data from your computer. Why is it useful to rename the dataset?

```{r}
dat <- USArrests
```

**Answer: Renaming the dataset provides a short-hand way of calling it as I code
          instead of trying to remember the name of the dataset.**

### Problem 2

Use this command to make the state names into a new variable called State. 

```{r, eval=FALSE}
dat$state <- tolower(rownames(USArrests))
```

This dataset has the state names as row names, so we just want to make them into a new variable. We also make them all lower case, because that will help us draw a map later - the map function requires the states to be lower case.


List the variables contained in the dataset `USArrests`.

```{r}
names(dat)
```

**Answer: The variables are Murder, Assault, UrbanPop, Rape, and state.**

### Problem 3 

What type of variable (from the DVB chapter) is `Murder`? 

**Answer: It is a quantitative/continuous variable.**

What R Type of variable is it?
```{r}
typeof("Murder")
```

**Answer: It is a character data type.**

### Problem 4

What information is contained in this dataset, in general? What do the numbers mean? 
```{r}
?USArrests
```

**Answer: This dataset contains 50 observations/instances on 5 variables: Murder 
          (murder arrests  per 100,000), Assault (assault arrests per 100,000), 
          UrbanPop (percent urban population), and Rape (rape arrests per 100,000), and state.**

### Problem 5

Draw a histogram of `Murder` with proper labels and title.

```{r}
hist(dat$Murder, main="Histogram of Murder Arrests", xlab="Murder Arrests \n 
     per 100,000", ylab="Frequency")
```

### Problem 6

Please summarize `Murder` quantitatively. What are its mean and median? What is the difference between mean and median? What is a quartile, and why do you think R gives you the 1st Qu. and 3rd Qu.?

```{r}
summary(dat$Murder)
```

**Answer: The mean number of murder arrests is 7.7888 per 100,000, and the median
          is 7.25 murder arrests per 100,000. According to HS, the mean and median
          are both measures of central tendency. However, the mean is described to
          be the value that each observation would receive if the values were redistributed
          among the dataset, and the mean on a histogram is the "balancing point". 
          The median is the value that is at the center if all the values were put 
          in an ordered list. According to HS, the interquartile range (IQR) is a measure 
          of spread, and the "quartiles...are the three values which divide the
          distribution into even fourths. The IQR is obtained by subtracting the 
          1st quartile from the 3rd quartile which is why R gives us both these
          values.**

### Problem 7

Repeat the same steps you followed for `Murder`, for the variables `Assault` and `Rape`. Now plot all three histograms together. You can do this by using the command `par(mfrow=c(3,1))` and then plotting each of the three. 

```{r, echo = TRUE, fig.width = 5, fig.height = 8}
summary(dat$Assault)
summary(dat$Rape)
```

**Answer: The mean number of assault arrests is 170.8 per 100,000, and the median
          is 159 assault arrests per 100,000. 
          The mean number of rape arrests is 21.23 per 100,000, and the median
          is 20.1 rape arrests per 100,000.**

What does the command par do, in your own words (you can look this up by asking R `?par`)?

**Answer: There are a lot of graphical features in R. Par() allows us to search and set them.**

```{r, echo = TRUE, fig.width = 5, fig.height = 8}
par(mfrow=c(3,1))
hist(dat$Murder, main="Histogram of Murder Arrests", xlab="Murder Arrests \n 
     per 100,000", ylab="Frequency")
hist(dat$Assault, main="Histogram of Assault Arrests", xlab="Assault Arrests \n 
     per 100,000", ylab="Frequency")
hist(dat$Rape, main="Histogram of Rape Arrests", xlab="Rape Arrests \n 
     per 100,000", ylab="Frequency")
```

What can you learn from plotting the histograms together?

**Answer: Murder and rape arrests are right skewed, which is good. What I thought
          was interesting were how the assault arrests are pretty normally distributed.
          Additionally, I see the average assault arrests per 100,000 were 
          much greater than the average murder or rape arrests per 100,000 which 
          makes sense.**
  
### Problem 8

In the console below (not in text), type `install.packages("maps")` and press Enter, and then type `install.packages("ggplot2")` and press Enter. This will install the packages so you can load the libraries.

Run this code:

```{r, eval = FALSE, fig.width = 7.5, fig.height = 4}
library('maps') # load maps library into R session
library('ggplot2') # load ggplot2 into R session

ggplot(dat, aes(map_id=state, fill=Murder)) + # call ggplot function, use dat 
                                              # dataframe, and set up plot aesthetics
  geom_map(map=map_data("state")) + # create map of all states
  expand_limits(x=map_data("state")$long, y=map_data("state")$lat) # expand plot limits
```

What does this code do? Explain what each line is doing.

**Answer: This code is creating a heat map of the murder arrests per 100,000 in 
          each state. See comments for a description of each line of code.**

$$\\[2in]$$




# Assignment 2 

### Problem 1
```{r}
#load library
library(tidyverse)
library(ggplot2)
# Read the data
dat <- read.csv(file = 'dat.nsduh.small.1.csv')
```

What are the dimensions of the dataset? 
```{r}
nrow(dat)
ncol(dat)
names(dat)
```

**Answer: This dataset contains 171 rows/observations and 7 columns.**

### Problem 2

What is this dataset about? Who collected the data, what kind of sample is it, and what was the purpose of generating the data?

**Answer: This dataset is a sample  of the 2019 National Survey of Drug Use and Health (NSDUH). According to their website (https://nsduhweb.rti.org/respweb/about_nsduh.html), NSDUH is sponsored by the Substance Abuse and Mental Health Services Administration (SAMHSA) and the US Dept. of Health and Human Services, and it serves as a sample to inform policymakers of tobacco, alcohol, and drug use in the US population as well as other health related concerns. Their website also states that they survey approximately 70,000 people each year ages 12 and up. The variables of the provided dataset are as follows: 'mjage', 'cigage', 'iralcage', 'age2', 'sexatract', 'speakengl', and 'irsex'. 'Mjage', 'cigage', and 'iralcage' refer to the age at which participants first started using marijuana or hashish, cigarrettes, and alcohol, respectively. The 'age2' variable is the age of the respondent at the end of the questionnaire. 'Sexatract', 'speakengl', and 'irsex' are the respondent's sexual attraction/orientation, English speaking level, and gender.**

### Problem 3: Age and gender

What is the age distribution of the sample like?

```{r}
hist(dat$age2, xlab = 'Age Category', main = 'Histogram of Age')
summary(dat$age2)
dat %>% group_by(age2) %>% count()
```
**Answer: It appears to be left skewed, and it looks like there's a peak at 15 which the codebook describes as being 35-49 years old. This means that the majority of the people within this dataset are not teenagers**

Do you think this age distribution representative of the US population? Why or why  not?

**Answer: No, because this is a very small sample size (171 people), and it wouldn't be representative of the millions of people that live in the US. Additionally, the NSDUH only surveys people aged 12 and older meaning children under 12 would be excluded from the age distribution. Also there are not many teens or people in their early twenties represented by this dataset.**

Is the sample balanced in terms of gender? If not, are there more females or males?

```{r}
hist(dat$irsex, xlab = 'Gender (1 = Male, 2 = Female)', main = 'Distribution of Gender')
dat %>% count(irsex)
```

**Answer: No, the sample is not balanced in terms of gender. There are more males (91 total) than females (80 total).**

```{r}
tab.agesex <- table(dat$irsex, dat$age2)
barplot(tab.agesex,
        main = "Stacked barchart",
        xlab = "Age category", ylab = "Frequency",
        legend.text = rownames(tab.agesex),
        beside = FALSE) # Stacked bars (default)
```

**Answer: It's difficult to be certain by just looking at this bar plot, but visually it appears as though this dataset contains males who are older and females who are younger. For example, the age categories of 14, 16, and 17 look to have more men than women while categories 8, 9, 10, 11, and 12 seem to have more females than males. This might also be because there are more males than females in this dataset. However, it is clear that the main age categories in this dataset are 13-17.**

### Problem 4: Substance use

For which of the three substances included in the dataset (marijuana, alcohol, and cigarettes) do individuals tend to use the substance earlier?

```{r}
summary(dat$mjage)
summary(dat$cigage)
summary(dat$iralcage)
hist(dat$mjage, xlab = 'Age Category of First Marijuana Usage', main = 'Distribution of First Marijuana Usage Age')
hist(dat$cigage, xlab = 'Age Category of First Cigarrete Usage', main = 'Distribution of First Cigarrete Usage Age')
hist(dat$iralcage,  xlab = 'Age Category of First Alcohol Usage', main = 'Distribution of First Alcohol Usage Age')
```

**Answer: From the summary statistics and the histograms, it looks like people tend to use alcohol earlier than cigarettes or marijuana, mainly around the age category of 15 (35-49 years old).**

### Question 5

What does the distribution of sexual attraction look like? Is this what you expected?

What is the distribution of sexual attraction by gender? 

```{r}
ggplot(dat, aes(x=sexatract)) + 
  geom_histogram() + 
  xlab('Sexual Attraction Category') +
  ggtitle('Distribution of Sexual Attraction \n Including Bad Data Entries')
```

**Answer: This histogram includes the entries where people chose not to answer or the entries were blank, answered, or bad data for whatever reason. I expected to see these types of entries in this dataset.**

```{r}
ggplot(dat, aes(x=sexatract)) + 
  geom_histogram() + 
  xlim(0, 6) + 
  xlab('Sexual Attraction Category') +
  ggtitle('Distribution of Sexual Attraction \n Excluding Bad Data Entries')
```

**Answer: I generated this histogram to isolate the sexual attraction categories by excluding the bad data entries. This clearly shows the majority of people in this dataset are only attracted to the opposite sex which is what I expected since heterosexuality is the majority sexual orientation in society. It is followed by mostly opposite sex attraction and attraction to both sexes. I would say none of this is a surprise given my sense of sexual orientations within the US.**

```{r}
tab.attsex <- table(dat$irsex, dat$sexatract)
barplot(tab.attsex,
        main = "Sexual Attraction Across Genders",
        xlab = 'Sexual Attraction Category',
        ylab = 'Frequency',
        legend.text = rownames(tab.attsex),
        beside = FALSE)
```

**Answer: This plot shows that the males mostly comprised the opposite sex attraction category as well as the strictly same sex attraction and unsure sexual attraction categories. They were also the majority sex that skipped this question altogether. It's interesting that females were the majority in the mostly opposite sex attraction and the both sex attraction categories.**


###Problem 6: English speaking

What does the distribution of English speaking look like in the sample? Is this what you might expect for a random sample of the US population?

Are there more English speaker females or males?

```{r}
hist(dat$speakengl,
     xlab = 'English Speaking Level',
     main = 'Distribution of English Speaking Levels')
```

**Answer: The vast majority of people in this survey speak English very well followed by people who speak it well and those who don't speak it at all. I would expect this from a random sample of the US population since the dominant language is English although we are a melting pot country with a variety of people groups.**


```{r}
tab.englsex <- table(dat$irsex, dat$speakengl)
barplot(tab.englsex,
        main = "English Speaking Level Across Genders",
        xlab = 'English Speaking Level',
        ylab = 'Frequency',
        legend.text = rownames(tab.englsex),
        beside = FALSE)
dat %>% group_by(irsex, speakengl) %>% count()
```

**Answer: From these statistics and plot, it appears as though there are more male English speakers in this dataset, but one has to remember there are more males in the dataset overall. Additionally, it's interesting that there are no males who rated themselves as not speaking English at all.**


# Exam 1

Load the data into an R data frame.
```{r}
df <- read.csv("fatal-police-shootings-data.csv")
library(ggplot2)
library(tidyverse)
library(tidyr)
```


### Problem 1 (10 points)

a. Describe the dataset. This is the source: https://github.com/washingtonpost/data-police-shootings . Write two sentences (max.) about this.

__Answer: According to the codebook, this dataset consists of fatal shootings (observations) of civilians by police officers on duty since 2015. The dataset includes information (variables/columns) of the victims such as age, race, gender, threat level, etc.__

b. How many observations are there in the data frame?
```{r}
nrow(df)
```

__Answer: There are 6594 observations in this dataset.__

c. Look at the names of the variables in the data frame. Describe what "body_camera", "flee", and "armed" represent, according to the codebook. Again, only write one sentence (max) per variable.
```{r}
names(df)
```

__"Body_camera" indicates 'true' or 'false' if the officer wore a body camera and recorded a portion of the shooting. "Flee" is if the victim was fleeing by foot, car, or not fleeing, and "armed" tells if the victim's arm is determined or unknown or if they were not armed.__

d. What are three weapons that you are surprised to find in the "armed" variable? Make a table of the values in "armed" to see the options.
```{r}
table(df$armed)
```

__Answer: It's kind of funny to see an air conditioner, binoculars, and microphone as weapons.__

### Problem 2 (10 points)

a. Describe the age distribution of the sample. Is this what you would expect to see?
```{r}
hist(df$age, main = 'Distribution of Age', xlab = 'Age')
```

__Answer: The age distribution is right skewed and unimodal with the peak being at around early to mid-30s. I would somewhat expect to see this because it's probable that police don't view older adults as threats typically, but I'm not exactly sure of this.__

b. To understand the center of the age distribution, would you use a mean or a median, and why? Find the one you picked.
```{r}
summary(df$age)
```

__I would use the median (35 years old) because the age distribution is right skewed, so if the mean were to be used, it wouldn't give an accurate representation of centrality.__

c. Describe the gender distribution of the sample. Do you find this surprising?
```{r}
barplot(table(df$gender), main = "Distribution of Gender")
df %>% group_by(gender) %>% count()
```

__Answer: The gender distribution is very unbalanced with males making up the majority (6298/6594 = 95.5%) of the dataset. This surprises me because although I expected more males in the dataset, I didn't think they would make up about 96% of the dataset. It looks like the gender column also contains some null values.__


### Problem 3 (10 points)

a. How many police officers had a body camera, according to news reports? What proportion is this of all the incidents in the data? Are you surprised that it is so high or low?

```{r}
barplot(table(df$body_camera), main = 'Body Camera on Officer')
df %>% group_by(body_camera) %>% count() %>% mutate(proportion = n/nrow(df))
```

__Answer: Very few, only 13.8%, officers had a body camera. This doesn't surprise me because when police are on duty, I would imagine they don't wear cameras on their person.__

b. In  how many of the incidents was the victim fleeing? What proportion is this of the total number of incidents in the data? Is this what you would expect?
```{r}
barplot(table(df$flee), main = 'Distribution of Flee Methods', xlab = 'Flee Method')
df %>% group_by(flee) %>% count() %>% mutate(proportion = n/nrow(df))
```

__Answer: Victims fleeing by car or foot make up 28.9% of the dataset. This number excludes null or 'other' values. This is expected because I imagine most people don't flee from police.__



### Problem 4 (10 points) 

a. Describe the relationship between the variables "body camera" and "flee" using a stacked barplot. What can you conclude from this relationship? 

*Hint 1: The categories along the x-axis are the options for "flee", each bar contains information about whether the police officer had a body camera (vertically), and the height along the y-axis shows the frequency of that category).*

*Hint 2: Also, if you are unsure about the syntax for barplot, run ?barplot in R and see some examples at the bottom of the documentation. This is usually a good way to look up the syntax of R code. You can also Google it.*


```{r}
tab.camflee <- table(df$body_camera, df$flee)
barplot(tab.camflee,
        main = "Relationship Between Body Cams and Fleeing Victims",
        xlab = 'Type of Fleeing',
        ylab = 'Frequency',
        legend.text = rownames(tab.camflee),
        beside = FALSE)
df %>% group_by(body_camera, flee) %>% count()
```

__Answer: It's important to note that these variables contain some null and 'other' values, and the 'true' and 'false' in the legend indicates whether or not the officer had a body camera. It looks like a body camera was used mostly on victims who didn't flee followed by the victims that fled on foot. This makes sense since the majority of the victims in this dataset didn't flee.__


### Extra credit (10 points)

a. What does this code tell us? 

```{r, eval=FALSE}
mydates <- as.Date(df$date)
head(mydates)
(mydates[length(mydates)] - mydates[1])
```
__Answer: This tells us the time difference in days between the oldest and the most recent fatal shooting in this dataset.__


b. On Friday, a new report was published that was described as follows by The Guardian: "More than half of US police killings are mislabelled or not reported, study finds." Without reading this article now (due to limited time), why do you think police killings might be mislabelled or underreported?
__Answer: It might be because the ones that are recorded have missing values which causes them to be excluded from the analysis.__


c. Regarding missing values in problem 4, do you see any? If so, do you think that's all that's missing from the data?
__Answer: Yes, there were some, and I think there are more missing values in the dataset.__



